<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Business Listings|Bookmarks|LocalLink</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
            <nav>
            <div class="HeaderTabs">
              <div class="logo-container">
              <img src="favicon.ico" alt="LocalLink Logo" class="logo-img">
            </div>

                <p><a href="index.html" id="home-tab-btn">Home</a></p>
                <p><a href="BusinessListing.html" id="business-listings-button">Business Listing|Bookmarks</a></p>
                <p><a href="deals.html" id="deals-tab-btn">Deals</a></p>
                <div class="theme-toggle">
                  <input type="checkbox" id="theme-switch" aria-label="Toggle dark mode">
                  <label for="theme-switch" class="toggle-label"><span class="toggle-ball"><span class="icon-sun">‚òÄÔ∏è</span><span class="icon-moon">üåô</span></span></label>
                </div>
            </div>


        </nav>

    </nav>
  </header>


  <main>
    <h1 style="text-align:center; margin-top:18px;">Business Listings</h1>
    <p>This will be the business listings page with different businesses near you! Click on the checkbox to save and bookmark a business card!</p>
    <div class="deals-bar">
        		<input type="text" placeholder="Search Business Listings..." id="search-bar">
		    </div>
    <br>
    <br>
    <button class="bookmark-button" onclick="scrollToBottom()">Go to Bookmarks</button>
  <script>
    function scrollToBottom() {
      window.scrollTo({
        top: document.body.scrollHeight,
        behavior: "smooth"
      });
    }
  </script>
    <br>


    <!-- where listing cards will be added -->
    <div id="listings"></div>


    <!-- Bookmarks area (on this page only ‚Äî no persistence yet) -->
    <section style="margin-top:30px;">
      <h2>------------------------------------------------------------Bookmarked Businesses------------------------------------------------------------</h2>
      <div id="bookmarked-businesses"></div>
    </section>


    <!-- Load your data file BEFORE the inline script below -->
    <!-- If your file is named SampleData.js, change the src accordingly. -->
    <script src="SampleData.js"></script>


    <script>
      // Inline render + bookmarking (no persistence)
      // Kept comments and simple style as requested.


      document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById("listings");
        const bookmarksContainer = document.getElementById("bookmarked-businesses");


        // Render bookmarks area by reading LISTINGS[*].bookmarked
        function renderBookmarks() {
          if (!bookmarksContainer) return;
          bookmarksContainer.innerHTML = '';
          LISTINGS.filter(b => b.bookmarked).forEach(business => {
            const div = document.createElement('div');
            div.className = 'business-card small';
            div.innerHTML = `<h3>${business.name}</h3><p>${business.shortDescription || business.category || ''}</p>`;
            bookmarksContainer.appendChild(div);
          });
          // show message if none
          if (bookmarksContainer.children.length === 0) {
            bookmarksContainer.innerHTML = '<p>No bookmarks yet. Click "Save" on a listing to add it.</p>';
          }
        }


        // clear container (in case)
        container.innerHTML = '';


        // It iterates the Listings object inside of an element using an arrow function and defines something called business
        LISTINGS.forEach(business => {
          // Creates a div called card, gives it the name business-card
          const card = document.createElement("div");
          card.classList.add("business-card");


          // Runs the object from the sample data inside of the card, adding these elements
          card.innerHTML = `
            <h2>${business.name}</h2>
            <p>${business.category}</p>
            <p>${business.address || ''}</p>
            <p>Rating: ${business.rating} (${business.reviewCount || 0} reviews)</p>
            <p>Price Range: ${"$".repeat(business.priceRange || 0)}</p>
            <p>${business.website ? `<a href="${business.website}" target="_blank" rel="noopener">${business.website}</a>` : ''}</p>
            <button class="review-btn">Leave a Review</button>
            <label class="bookmark-toggle">
              <!-- dynamic data-id so JS knows which business this checkbox belongs to -->
              <input type="checkbox" class="bookmark-checkbox" data-id="${business.id}">
              <span class="checkmark"></span>
            </label>
            <hr>
          `;


          // append card to DOM
          container.appendChild(card);


          // Add event listener for this checkbox (closure captures `business`)
          const checkbox = card.querySelector('.bookmark-checkbox');
          checkbox.addEventListener('change', () => {
            business.bookmarked = checkbox.checked; // update property
            if (checkbox.checked) {
              console.log(`Bookmarked: ${business.name}`);
            } else {
              console.log(`Removed bookmark: ${business.name}`);
            }
            renderBookmarks(); // refresh bookmarks display on this page
          });
        });


        // Optional: show any pre-bookmarked items on first load
        renderBookmarks();
      });


     
    </script>
  </main>

  <br>
  <br>

  <center>
    <a href="BusinessListing.html">Go back to top</a>
  </center>


  <footer>
    <p>&copy; 2025 LocalLink</p>
  </footer>




  <script src="app.js"></script>
</body>
</html>
